<mat-tab-group>
    <mat-tab label="ADD SURGERY">
        <div class="container pb-5">
            <mat-stepper orientation="vertical" class="mt-3" #stepper>
                <mat-step>
                    <ng-template matStepLabel>Surgery Details</ng-template>

                    <div>
                        <div class="row">
                            <div class="col-6">
                                <div class="row">
                                    <div class="col-12">
                                        <mat-form-field class="example-full-width">
                                            <mat-label>Surgery Type</mat-label>
                                            <input type="text" aria-label="Number" matInput [formControl]="myControl"
                                                [matAutocomplete]="auto">
                                            <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
                                                <mat-option (click)="getPredictedResult(option)"
                                                    *ngFor="let option of filteredOptions | async" [value]="option">
                                                    {{option}}
                                                </mat-option>
                                            </mat-autocomplete>
                                        </mat-form-field>
            
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field class="example-full-width">
                                            <mat-label>First Name</mat-label>
                                            <input type="text" matInput [formControl]="firstNameFormControl"
                                                [errorStateMatcher]="matcher">
                                            <mat-error
                                                *ngIf="firstNameFormControl.hasError('email') && !firstNameFormControl.hasError('required')">
                                                Please enter a First Name
                                            </mat-error>
                                            <mat-error *ngIf="firstNameFormControl.hasError('required')">
                                                First Name is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field class="example-full-width">
                                            <mat-label>Last Name</mat-label>
                                            <input type="text" matInput [formControl]="lastNameFormControl"
                                                [errorStateMatcher]="matcher">
                                            <mat-error
                                                *ngIf="lastNameFormControl.hasError('email') && !lastNameFormControl.hasError('required')">
                                                Please enter a Last Name
                                            </mat-error>
                                            <mat-error *ngIf="lastNameFormControl.hasError('required')">
                                                Last Name is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field class="example-full-width">
                                            <mat-label>Age</mat-label>
                                            <input type="number" matInput [formControl]="ageFormControl"
                                                [errorStateMatcher]="matcher">
                                            <mat-error
                                                *ngIf="firstNameFormControl.hasError('email') && !firstNameFormControl.hasError('required')">
                                                Please enter Age
                                            </mat-error>
                                            <mat-error *ngIf="firstNameFormControl.hasError('required')">
                                                Age is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-radio-group [formControl]="genderFormControl"
                                            aria-label="Select an option">
                                            <mat-radio-button color='primary' value="1">Male</mat-radio-button>
                                            <mat-radio-button color='primary' value="2">Female</mat-radio-button>
                                        </mat-radio-group>
                                    </div>
                                    <div class="col-12">
                                        <mat-form-field class="example-full-width">
                                            <mat-label>Email</mat-label>
                                            <input type="email" matInput [formControl]="emailFormControl"
                                                [errorStateMatcher]="matcher">
                                            <mat-error
                                                *ngIf="emailFormControl.hasError('email') && !emailFormControl.hasError('required')">
                                                Please enter a valid email address
                                            </mat-error>
                                            <mat-error *ngIf="emailFormControl.hasError('required')">
                                                Email is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-12">
                                        <mat-form-field class="example-full-width">
                                            <mat-label>Telephone</mat-label>
                                            <span matPrefix>+94 &nbsp;</span>
                                            <input [formControl]="telephoneFormControl" type="tel" matInput
                                                placeholder="555-555-1234">
                                            <mat-error *ngIf="telephoneFormControl.hasError('required')">
                                                Telephone is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-12">
                                        <mat-form-field class="example-full-width">
                                            <mat-label>Note</mat-label>
                                            <textarea [formControl]="noteFormControl" matInput></textarea>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field class="example-full-width">
                                            <mat-label>Weight</mat-label>
                                            <input type="number" matInput [formControl]="weightFormControl"
                                                [errorStateMatcher]="matcher">
                                            <mat-error *ngIf="firstNameFormControl.hasError('required')">
                                                Weight is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field class="example-full-width">
                                            <mat-label>Height</mat-label>
                                            <input type="number" matInput [formControl]="heightFormControl"
                                                [errorStateMatcher]="matcher">
                                            <mat-error *ngIf="lastNameFormControl.hasError('required')">
                                                Height is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-12">
                                        <button (click)="getPredictedTime(stepper)" mat-flat-button color="primary">Add Surgery
                                            Details</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="row">
                                    <div class="row" style="border: 2px solid black; margin: 3px; border-radius: 5px;">
                                        <div class="col-12 mt-3">
                                            <div class="row">
                                                <div class="col-5">
                                                    <p style="float: left;" class="radiotype">Cancer</p>
                                                </div>
                                                <div class="col-7">
                                                    <mat-radio-group [formControl]="cancerFormControl"
                                                        aria-label="Select an option">
                                                        <mat-radio-button color='primary' value="1">yes
                                                        </mat-radio-button>
                                                        <mat-radio-button color='primary' value="0">no
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-12">
                                            <div class="row">
                                                <div class="col-5">
                                                    <p style="float: left;" class="radiotype">cvd</p>

                                                </div>
                                                <div class="col-7">
                                                    <mat-radio-group [formControl]="cvdFormControl"
                                                        aria-label="Select an option">
                                                        <mat-radio-button color='primary' value="1">yes
                                                        </mat-radio-button>
                                                        <mat-radio-button color='primary' value="0">no
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>


                                        </div>
                                        <div class="col-12">
                                            <div class="row">
                                                <div class="col-5">
                                                    <p style="float: left;" class="radiotype">dementia</p>

                                                </div>
                                                <div class="col-7">
                                                    <mat-radio-group [formControl]="dementiaFormControl"
                                                        aria-label="Select an option">
                                                        <mat-radio-button color='primary' value="1">yes
                                                        </mat-radio-button>
                                                        <mat-radio-button color='primary' value="0">no
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-12">
                                            <div class="row">
                                                <div class="col-5">
                                                    <p style="float: left;" class="radiotype">diabetes</p>

                                                </div>
                                                <div class="col-7">
                                                    <mat-radio-group [formControl]="diabetesFormControl"
                                                        aria-label="Select an option">
                                                        <mat-radio-button color='primary' value="1">yes
                                                        </mat-radio-button>
                                                        <mat-radio-button color='primary' value="0">no
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-12">
                                            <div class="row">
                                                <div class="col-5">
                                                    <p style="float: left;" class="radiotype">digestive</p>

                                                </div>
                                                <div class="col-7">
                                                    <mat-radio-group [formControl]="digestiveFormControl"
                                                        aria-label="Select an option">
                                                        <mat-radio-button color='primary' value="1">yes
                                                        </mat-radio-button>
                                                        <mat-radio-button color='primary' value="0">no
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-12">
                                            <div class="row">
                                                <div class="col-5">
                                                    <p style="float: left;" class="radiotype">osteoarthritis</p>

                                                </div>
                                                <div class="col-7">
                                                    <mat-radio-group [formControl]="osteoarthritisFormControl"
                                                        aria-label="Select an option">
                                                        <mat-radio-button color='primary' value="1">yes
                                                        </mat-radio-button>
                                                        <mat-radio-button color='primary' value="0">no
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-12">
                                            <div class="row">
                                                <div class="col-5">
                                                    <p style="float: left;" class="radiotype">pylogical</p>

                                                </div>
                                                <div class="col-7">
                                                    <mat-radio-group [formControl]="pylogicalFormControl"
                                                        aria-label="Select an option">
                                                        <mat-radio-button color='primary' value="1">yes
                                                        </mat-radio-button>
                                                        <mat-radio-button color='primary' value="0">no
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-12">
                                            <div class="row">
                                                <div class="col-5">
                                                    <p style="float: left;" class="radiotype">pulmonary</p>
                                                </div>
                                                <div class="col-7">
                                                    <mat-radio-group [formControl]="pulmonaryFormControl"
                                                        aria-label="Select an option">
                                                        <mat-radio-button color='primary' value="1">yes
                                                        </mat-radio-button>
                                                        <mat-radio-button color='primary' value="0">no
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </mat-step>
                <mat-step *ngIf="show_stepper_2" >
                    <ng-template matStepLabel>Surgery Scheduling</ng-template>
                    <div class="row mt-3">

                        <div class="col-6">
                            <mat-form-field class="example-full-width">
                                <mat-label>Choose a date</mat-label>
                                <input [formControl]="selectedDateFormControl" matInput [matDatepicker]="picker">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>

                    <div>
                        <div class="row">
                            <div class="col-6">
                                <div class="row">
                                    <div style="background-color: brown;" class="col-4 mt-3"
                                        style="text-align: center;">
                                        <span style="font-size: 20px; color: green;">{{ predictedtimeText }}</span>
                                        <p style="color: green;">Predicted Duration</p>
                                    </div>
                                    <div class="col-4">
                                        <mat-form-field class="example-full-width mt-3" appearance="fill">
                                            <mat-label>Estimated Start Time</mat-label>
                                            <input matInput [formControl]="startTimeFormControl" type="time">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-4">
                                        <mat-form-field class="example-full-width mt-3" appearance="fill">
                                            <mat-label>Estimated End Time</mat-label>
                                            <input matInput [formControl]="endTimeFormControl" type="time"
                                                value="08:56">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-12">
                                        <button (click)="createSurgery(stepper)" mat-flat-button color="primary">Add
                                            Surgery</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="row">
                                    <!-- Resource Table -->
                                    <!-- <div class="col-12">
                                        <table mat-table [dataSource]="dataSource" cdkDropList
                                            cdkDropListOrientation="horizontal" (cdkDropListDropped)="drop($event)">
        
                                            <ng-container matColumnDef="resource">
                                                <th mat-header-cell cdkDrag *matHeaderCellDef> Resource </th>
                                                <td mat-cell *matCellDef="let element"> {{element.resource}} </td>
                                            </ng-container>
        
                                            <ng-container matColumnDef="predicted">
                                                <th mat-header-cell cdkDrag *matHeaderCellDef> Predicted </th>
                                                <td mat-cell *matCellDef="let element"> {{element.predicted}} </td>
                                            </ng-container>
        
                                            <ng-container matColumnDef="estimated">
                                                <th mat-header-cell cdkDrag *matHeaderCellDef> Estimated </th>
                                                <td mat-cell *matCellDef="let element">
                                                    <mat-form-field class="example-full-width" appearance="fill">
                                                        <mat-label>Estimate Value</mat-label>
                                                        <input matInput type="number" value="{{element.predicted}}">
                                                    </mat-form-field>
                                                </td>
                                            </ng-container>
        
                                            <tr mat-header-row *matHeaderRowDef="columns"></tr>
                                            <tr mat-row *matRowDef="let row; columns: columns;"></tr>
                                        </table>
                                    </div> -->
                                </div>
                            </div>
                        </div>

                    </div>
                </mat-step>
                <mat-step *ngIf="show_stepper_3">
                    <ng-template matStepLabel>Surgery Team</ng-template>
                    <div class="container pb-5">

                        <!-- Trainee Surgent -->
                        <div class="row mt-5">
                            <div class="col-md-4 fav-box">
                                <div class="col-12">
                                    <div>
                                        <h1 style="float: left;">Surgeon</h1>
                                        <span class="example-spacer"></span>
                                        <button style="float: right;" (click)="customizeTraineeSurgent()" mat-mini-fab
                                            color="primary" aria-label="Example icon button with a menu icon">
                                            <mat-icon *ngIf="isCustomizedSurgent">list</mat-icon>
                                            <mat-icon *ngIf="!isCustomizedSurgent">edit</mat-icon>
                                        </button>
                                    </div>
                                </div>
                                <div *ngIf="!isCustomizedSurgent" style="clear: both;" class="col-12">
                                    <div class="row">
                                        <div class="col-12" *ngFor="let fruit of traineeSurgent; let i = index">
                                            <mat-card class="example-card mt-2">
                                                <mat-card-header>
                                                    <div mat-card-avatar
                                                        style="background-image: url('{{getProfilePicSurgeon(i)}}');background-size: cover;">
                                                    </div>
                                                    <mat-card-title>{{ fruit }}</mat-card-title>
                                                    <mat-card-subtitle>77 488 999 0 | {{getEmailAddress(fruit)}}
                                                    </mat-card-subtitle>
                                                </mat-card-header>
                                            </mat-card>
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="isCustomizedSurgent" class="col-12">
                                    <mat-form-field class="example-chip-list">
                                        <mat-label>Favorite Surgeon</mat-label>
                                        <mat-chip-list #chipList aria-label="Fruit selection">
                                            <mat-chip *ngFor="let fruit of traineeSurgent; let i = index"
                                                (removed)="removeTraineeSurgent(fruit)">
                                                <img src="{{getProfilePicSurgeon(i)}}" matChipAvatar />
                                                {{fruit}}
                                                <button matChipRemove>
                                                    <mat-icon>cancel</mat-icon>
                                                </button>
                                            </mat-chip>
                                            <input placeholder="New Surgeon..." #fruitInput
                                                [formControl]="chipsCtrlTraineeSurgent" [matAutocomplete]="auto"
                                                [matChipInputFor]="chipList"
                                                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                                (matChipInputTokenEnd)="addTraineeSurgent($event)">
                                        </mat-chip-list>
                                        <mat-autocomplete #auto="matAutocomplete"
                                            (optionSelected)="selectedTraineeSurgent($event)">
                                            <mat-option *ngFor="let fruit of filteredTraineeSurgent | async"
                                                [value]="fruit">
                                                {{fruit}}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </div>

                            </div>

                            <!--Nurse-->
                            <div class="col-md-4 fav-box">
                                <div class="col-12">
                                    <div>
                                        <h1 style="float: left;">Nurse</h1>
                                        <span class="example-spacer"></span>
                                        <button style="float: right;" (click)="customizeNurse()" mat-mini-fab
                                            color="primary" aria-label="Example icon button with a menu icon">
                                            <mat-icon *ngIf="isCustomizedNurse">list</mat-icon>
                                            <mat-icon *ngIf="!isCustomizedNurse">edit</mat-icon>

                                        </button>
                                    </div>
                                </div>
                                <div *ngIf="!isCustomizedNurse" style="clear: both;" class="col-12">
                                    <div class="row">
                                        <div class="col-12" *ngFor="let fruit of nurse; let i = index">
                                            <mat-card class="example-card mt-2">
                                                <mat-card-header>
                                                    <div mat-card-avatar
                                                        style="background-image: url('{{getProfilePicNurse(i)}}');background-size: cover;">
                                                    </div>
                                                    <mat-card-title>{{ fruit }}</mat-card-title>
                                                    <mat-card-subtitle>{{ getTelephone(i) }} |
                                                        {{getEmailAddress(fruit)}}</mat-card-subtitle>
                                                </mat-card-header>

                                            </mat-card>

                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="isCustomizedNurse" class="col-12">
                                    <mat-form-field class="example-chip-list">
                                        <mat-label>Favorite Nurse</mat-label>
                                        <mat-chip-list #chipList aria-label="Fruit selection">
                                            <mat-chip *ngFor="let fruit of nurse;let i = index"
                                                (removed)="removeNurse(fruit)">
                                                <img src="{{getProfilePicNurse(i)}}" matChipAvatar />

                                                {{fruit}}
                                                <button matChipRemove>
                                                    <mat-icon>cancel</mat-icon>
                                                </button>
                                            </mat-chip>
                                            <input placeholder="New Nurse..." #fruitInput [formControl]="chipsCtrlNurse"
                                                [matAutocomplete]="auto" [matChipInputFor]="chipList"
                                                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                                (matChipInputTokenEnd)="addNurse($event)">
                                        </mat-chip-list>
                                        <mat-autocomplete #auto="matAutocomplete"
                                            (optionSelected)="selectedNurse($event)">
                                            <mat-option *ngFor="let fruit of filteredNurse | async" [value]="fruit">
                                                {{fruit}}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </div>

                            </div>

                            <!--anesthesiologist-->
                            <div class="col-md-4 fav-box">
                                <div class="col-12">
                                    <div>
                                        <h1 style="float: left;">Anesthesiologist</h1>
                                        <span class="example-spacer"></span>
                                        <button style="float: right;" (click)="customizeAnesthatistic()" mat-mini-fab
                                            color="primary" aria-label="Example icon button with a menu icon">
                                            <mat-icon *ngIf="isCustomizedAnesthtistic">list</mat-icon>
                                            <mat-icon *ngIf="!isCustomizedAnesthtistic">edit</mat-icon>

                                        </button>
                                    </div>
                                </div>
                                <div *ngIf="!isCustomizedAnesthtistic" style="clear: both;" class="col-12">
                                    <div class="row">
                                        <div class="col-12" *ngFor="let fruit of anesthetic; let i = index">
                                            <mat-card class="example-card mt-2">
                                                <mat-card-header>
                                                    <div mat-card-avatar
                                                        style="background-image: url('{{getProfilePicAnesthesiologist(i)}}');background-size: cover;">
                                                    </div>
                                                    <mat-card-title>{{ fruit }}</mat-card-title>
                                                    <mat-card-subtitle>{{ getTelephone(i) }} |
                                                        {{getEmailAddress(fruit)}}</mat-card-subtitle>
                                                </mat-card-header>

                                            </mat-card>

                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="isCustomizedAnesthtistic" class="col-12">
                                    <mat-form-field class="example-chip-list">
                                        <mat-label>Favorite Anesthesiologist</mat-label>
                                        <mat-chip-list #chipList aria-label="Fruit selection">
                                            <mat-chip *ngFor="let fruit of anesthetic;let i = index"
                                                (removed)="removeAnesthatistic(fruit)">
                                                <img src="{{getProfilePicAnesthesiologist(i)}}" matChipAvatar />

                                                {{fruit}}
                                                <button matChipRemove>
                                                    <mat-icon>cancel</mat-icon>
                                                </button>
                                            </mat-chip>
                                            <input placeholder="New Anesthesiologist..." #fruitInput
                                                [formControl]="chipsCtrlNurse" [matAutocomplete]="auto"
                                                [matChipInputFor]="chipList"
                                                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                                (matChipInputTokenEnd)="addNurse($event)">
                                        </mat-chip-list>
                                        <mat-autocomplete #auto="matAutocomplete"
                                            (optionSelected)="selectedAnesthetistic($event)">
                                            <mat-option *ngFor="let fruit of filteredAnesthetic | async"
                                                [value]="fruit">
                                                {{fruit}}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </div>

                            </div>
                        </div>
                        <!--save as my team-->
                        <div class="row">
                            <div class="col-12">
                                <div>
                                    <button color='primary' (click)="saveMyTeam()" mat-flat-button>
                                        Save My Team
                                    </button>
                                </div>

                            </div>
                        </div>
                    </div>
                </mat-step>
            </mat-stepper>
        </div>
    </mat-tab>
    <mat-tab label="SURGERIES"> 
         <app-surgery-details></app-surgery-details>
    </mat-tab>
</mat-tab-group>